{
  "Resources": {
    "SecurityGroup": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "Security group for the lambdas",
        "SecurityGroupIngress": [
          {
            "IpProtocol" : "tcp",
            "FromPort" : 80,
            "ToPort" : 80,
            "CidrIp": "0.0.0.0/0"
          }
        ]
      }
    },
    "LambdaLB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Subnets": [
          "subnet-a5385bc3",
          "subnet-d489fa9c",
          "subnet-8e9538d4"
        ],
        "SecurityGroups": [
          {"Fn::GetAtt": ["SecurityGroup", "GroupId"]}
        ]
      }
    },
    "LBListener": {
      "Type" : "AWS::ElasticLoadBalancingV2::Listener",
      "Properties" : {
        "DefaultActions" : [{
          "Type" : "forward",
          "TargetGroupArn" : { "Ref" : "LBTargetGroup" }
        }],
        "LoadBalancerArn" : { "Ref" : "LambdaLB" },
        "Port" : "80",
        "Protocol" : "HTTP"
      }
    }
  }
}